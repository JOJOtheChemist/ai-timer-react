
============================================================
🧪 Moment API 完整测试
============================================================
测试时间: 2025-10-02 03:08:02
测试服务: http://localhost:8000
测试用户: 1

============================================================
🚀 开始测试 Moment API
============================================================


📋 第一部分：动态管理 API

============================================================
测试: 创建动态
方法: POST http://localhost:8000/api/v1/moments
参数: {"user_id": 1}
数据: {
  "moment_type": "dynamic",
  "content": "这是一条测试动态，分享我的学习心得！#学习 #效率",
  "tags": [
    "学习",
    "效率",
    "测试"
  ]
}
状态码: 502
响应: 
❌ 测试失败: 创建动态: HTTP 502

============================================================
测试: 创建干货
方法: POST http://localhost:8000/api/v1/moments
参数: {"user_id": 1}
数据: {
  "moment_type": "dryGoods",
  "title": "高效学习方法分享",
  "content": "这是一篇关于如何高效学习的干货文章...",
  "tags": [
    "学习方法",
    "干货",
    "分享"
  ],
  "attachments": [
    {
      "type": "file",
      "url": "https://example.com/study-guide.pdf",
      "name": "学习指南.pdf",
      "size": 1024000
    }
  ]
}
状态码: 502
响应: 
❌ 测试失败: 创建干货: HTTP 502

============================================================
测试: 获取动态列表（默认）
方法: GET http://localhost:8000/api/v1/moments
参数: {"user_id": 1, "page": 1, "page_size": 10}
状态码: 502
响应: 
❌ 测试失败: 获取动态列表（默认）: HTTP 502

============================================================
测试: 获取动态列表（仅dynamic）
方法: GET http://localhost:8000/api/v1/moments
参数: {"user_id": 1, "moment_type": "dynamic", "page": 1, "page_size": 10}
状态码: 502
响应: 
❌ 测试失败: 获取动态列表（仅dynamic）: HTTP 502

============================================================
测试: 获取动态列表（仅dryGoods）
方法: GET http://localhost:8000/api/v1/moments
参数: {"user_id": 1, "moment_type": "dryGoods", "page": 1, "page_size": 10}
状态码: 502
响应: 
❌ 测试失败: 获取动态列表（仅dryGoods）: HTTP 502

============================================================
测试: 获取动态列表（按标签筛选）
方法: GET http://localhost:8000/api/v1/moments
参数: {"user_id": 1, "tags": ["学习"], "page": 1, "page_size": 10}
状态码: 502
响应: 
❌ 测试失败: 获取动态列表（按标签筛选）: HTTP 502

============================================================
测试: 获取动态列表（今日）
方法: GET http://localhost:8000/api/v1/moments
参数: {"user_id": 1, "time_range": "today", "page": 1, "page_size": 10}
状态码: 502
响应: 
❌ 测试失败: 获取动态列表（今日）: HTTP 502

============================================================
测试: 获取动态列表（按热度排序）
方法: GET http://localhost:8000/api/v1/moments
参数: {"user_id": 1, "hot_type": "hot", "page": 1, "page_size": 10}
状态码: 502
响应: 
❌ 测试失败: 获取动态列表（按热度排序）: HTTP 502

============================================================
测试: 搜索动态
方法: GET http://localhost:8000/api/v1/moments/search
参数: {"user_id": 1, "keyword": "学习", "page": 1, "page_size": 10}
状态码: 502
响应: 
❌ 测试失败: 搜索动态: HTTP 502

============================================================
测试: 获取热门标签
方法: GET http://localhost:8000/api/v1/moments/tags/popular
参数: {"limit": 20}
状态码: 502
响应: 
❌ 测试失败: 获取热门标签: HTTP 502

============================================================
测试: 获取我发布的动态
方法: GET http://localhost:8000/api/v1/moments/me/published
参数: {"user_id": 1, "page": 1, "page_size": 10}
状态码: 502
响应: 
❌ 测试失败: 获取我发布的动态: HTTP 502


💬 第二部分：动态互动 API

============================================================
测试: 获取我的收藏
方法: GET http://localhost:8000/api/v1/moments/me/bookmarks
参数: {"user_id": 1, "page": 1, "page_size": 10}
状态码: 502
响应: 
❌ 测试失败: 获取我的收藏: HTTP 502

============================================================
测试: 获取我点赞的动态
方法: GET http://localhost:8000/api/v1/moments/me/likes
参数: {"user_id": 1, "page": 1, "page_size": 10}
状态码: 502
响应: 
❌ 测试失败: 获取我点赞的动态: HTTP 502

============================================================
测试: 获取我的互动统计
方法: GET http://localhost:8000/api/v1/moments/me/stats
参数: {"user_id": 1}
状态码: 502
响应: 
❌ 测试失败: 获取我的互动统计: HTTP 502

============================================================
测试: 动态服务健康检查
方法: GET http://localhost:8000/api/v1/moments/health
状态码: 502
响应: 
❌ 测试失败: 动态服务健康检查: HTTP 502

============================================================
测试: 动态互动服务健康检查
方法: GET http://localhost:8000/api/v1/moments/health
状态码: 502
响应: 
❌ 测试失败: 动态互动服务健康检查: HTTP 502

============================================================
📊 测试结果汇总
============================================================
总测试数: 16
✅ 通过: 0
❌ 失败: 16
通过率: 0.0%

❌ 失败的测试:
  1. 创建动态: HTTP 502
  2. 创建干货: HTTP 502
  3. 获取动态列表（默认）: HTTP 502
  4. 获取动态列表（仅dynamic）: HTTP 502
  5. 获取动态列表（仅dryGoods）: HTTP 502
  6. 获取动态列表（按标签筛选）: HTTP 502
  7. 获取动态列表（今日）: HTTP 502
  8. 获取动态列表（按热度排序）: HTTP 502
  9. 搜索动态: HTTP 502
  10. 获取热门标签: HTTP 502
  11. 获取我发布的动态: HTTP 502
  12. 获取我的收藏: HTTP 502
  13. 获取我点赞的动态: HTTP 502
  14. 获取我的互动统计: HTTP 502
  15. 动态服务健康检查: HTTP 502
  16. 动态互动服务健康检查: HTTP 502

============================================================
✅ 测试完成
============================================================

📄 测试结果已保存到: tests/report/MOMENT_API_TEST_RESULT.json
