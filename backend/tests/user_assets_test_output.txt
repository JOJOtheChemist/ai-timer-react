
ğŸš€ ============================================================================
   User Assets API æµ‹è¯•å¼€å§‹
================================================================================
ğŸ”§ å‡†å¤‡æµ‹è¯•æ•°æ®...
âœ… æµ‹è¯•æ•°æ®å‡†å¤‡å®Œæˆ
   - æµ‹è¯•ç”¨æˆ·ID: 1001, åˆå§‹é’»çŸ³: 500
   - æµ‹è¯•å¯¼å¸ˆID: 1
   - æµ‹è¯•æœåŠ¡ID: 1, ä»·æ ¼: 100é’»çŸ³

================================================================================
æµ‹è¯•1: GET /api/v1/users/me/assets - è·å–ç”¨æˆ·èµ„äº§ä¿¡æ¯
================================================================================
è¯·æ±‚: GET http://localhost:8000/api/v1/users/me/assets
å‚æ•°: {'user_id': 1001}
å“åº”çŠ¶æ€: 500
å“åº”å†…å®¹: {'detail': "æœåŠ¡å™¨å†…éƒ¨é”™è¯¯: 1 validation errors:\n  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None}\n", 'type': 'ResponseValidationError'}
âŒ æµ‹è¯•å¤±è´¥: {"detail":"æœåŠ¡å™¨å†…éƒ¨é”™è¯¯: 1 validation errors:\n  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': None}\n","type":"ResponseValidationError"}

================================================================================
æµ‹è¯•2: POST /api/v1/users/me/assets/recharge - åˆ›å»ºå……å€¼è®¢å•
================================================================================
è¯·æ±‚: POST http://localhost:8000/api/v1/users/me/assets/recharge
å‚æ•°: {'user_id': 1001}
è¯·æ±‚ä½“: {'amount': 50.0, 'payment_method': 'alipay'}
å“åº”çŠ¶æ€: 500
å“åº”å†…å®¹: {'detail': 'åˆ›å»ºå……å€¼è®¢å•å¤±è´¥: 400: åˆ›å»ºå……å€¼è®¢å•å¤±è´¥'}
âŒ æµ‹è¯•å¤±è´¥: {"detail":"åˆ›å»ºå……å€¼è®¢å•å¤±è´¥: 400: åˆ›å»ºå……å€¼è®¢å•å¤±è´¥"}

================================================================================
æµ‹è¯•3: GET /api/v1/users/me/assets/records - è·å–èµ„äº§å˜åŠ¨è®°å½•
================================================================================
è¯·æ±‚: GET http://localhost:8000/api/v1/users/me/assets/records
å‚æ•°: {'user_id': 1001, 'limit': 10, 'offset': 0}
å“åº”çŠ¶æ€: 200
å“åº”å†…å®¹: []
âŒ æµ‹è¯•å¼‚å¸¸: 

================================================================================
æµ‹è¯•4: POST /api/v1/users/me/assets/purchase - è´­ä¹°å¯¼å¸ˆæœåŠ¡
================================================================================
è´­ä¹°å‰ä½™é¢: 500 é’»çŸ³
è¯·æ±‚: POST http://localhost:8000/api/v1/users/me/assets/purchase
å‚æ•°: {'user_id': 1001}
è¯·æ±‚ä½“: {'tutor_id': 1, 'service_id': 1}
å“åº”çŠ¶æ€: 500
å“åº”å†…å®¹: {'detail': 'è´­ä¹°å¯¼å¸ˆæœåŠ¡å¤±è´¥: è´­ä¹°å¯¼å¸ˆæœåŠ¡å¤±è´¥: é’»çŸ³ä½™é¢ä¸è¶³'}
âŒ æµ‹è¯•å¤±è´¥: {"detail":"è´­ä¹°å¯¼å¸ˆæœåŠ¡å¤±è´¥: è´­ä¹°å¯¼å¸ˆæœåŠ¡å¤±è´¥: é’»çŸ³ä½™é¢ä¸è¶³"}

================================================================================
æµ‹è¯•5: GET /api/v1/users/me/orders/tutor - æŸ¥è¯¢å¯¼å¸ˆæœåŠ¡è®¢å•å†å²
================================================================================
è¯·æ±‚: GET http://localhost:8000/api/v1/users/me/orders/tutor
å‚æ•°: {'user_id': 1001, 'page': 1, 'page_size': 20}
å“åº”çŠ¶æ€: 500
å“åº”å†…å®¹: {'detail': "è·å–å¯¼å¸ˆæœåŠ¡è®¢å•å¤±è´¥: è·å–å¯¼å¸ˆæœåŠ¡è®¢å•å¤±è´¥: è·å–ç”¨æˆ·è®¢å•å¤±è´¥: Textual SQL expression '\\n            SELECT \\n    ...' should be explicitly declared as text('\\n            SELECT \\n    ...')"}
âŒ æµ‹è¯•å¤±è´¥: {"detail":"è·å–å¯¼å¸ˆæœåŠ¡è®¢å•å¤±è´¥: è·å–å¯¼å¸ˆæœåŠ¡è®¢å•å¤±è´¥: è·å–ç”¨æˆ·è®¢å•å¤±è´¥: Textual SQL expression '\\n            SELECT \\n    ...' should be explicitly declared as text('\\n            SELECT \\n    ...')"}

================================================================================
æµ‹è¯•6: POST /api/v1/users/me/assets/purchase - ä½™é¢ä¸è¶³æµ‹è¯•
================================================================================
âŒ æµ‹è¯•å¼‚å¸¸: window functions are not allowed in WHERE
LINE 5: ...heckin_time) = CURRENT_DATE - INTERVAL '1 day' * (ROW_NUMBER...
                                                             ^
QUERY:  SELECT COUNT(*) >= (badge_record.condition_config->>'days')::INTEGER
                                                  FROM checkin_record cr
                WHERE cr.user_id = target_user_id
                AND cr.checkin_time >= CURRENT_DATE - INTERVAL '1 day' * (badge_record.condition_config->>'days')::INTEGER
                AND DATE(cr.checkin_time) = CURRENT_DATE - INTERVAL '1 day' * (ROW_NUMBER() OVER (ORDER BY cr.checkin_time DESC) - 1)
CONTEXT:  PL/pgSQL function check_badge_conditions(bigint,bigint) line 22 at SQL statement
SQL statement "SELECT check_badge_conditions(NEW.user_id)"
PL/pgSQL function auto_check_badges() line 12 at PERFORM


ğŸ§¹ æ¸…ç†æµ‹è¯•æ•°æ®...
âœ… æµ‹è¯•æ•°æ®æ¸…ç†å®Œæˆ

================================================================================
ğŸ“Š æµ‹è¯•æ€»ç»“
================================================================================
âŒ å¤±è´¥ - è·å–ç”¨æˆ·èµ„äº§ä¿¡æ¯
âŒ å¤±è´¥ - åˆ›å»ºå……å€¼è®¢å•
âŒ å¤±è´¥ - è·å–èµ„äº§å˜åŠ¨è®°å½•
âŒ å¤±è´¥ - è´­ä¹°å¯¼å¸ˆæœåŠ¡
âŒ å¤±è´¥ - æŸ¥è¯¢å¯¼å¸ˆæœåŠ¡è®¢å•å†å²
âŒ å¤±è´¥ - ä½™é¢ä¸è¶³æµ‹è¯•
================================================================================
æ€»è®¡: 0/6 æµ‹è¯•é€šè¿‡ (0.0%)
================================================================================
