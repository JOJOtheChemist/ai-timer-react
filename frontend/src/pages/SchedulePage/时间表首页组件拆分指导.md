要拆分「MainSchedulePage」（智能时间管理主页面），需遵循**「容器组件 + 展示组件」**模式，按**功能模块+逻辑分层**拆分，提升可维护性与复用性。以下是具体拆分逻辑和文件结构建议：


### 一、拆分逻辑（按功能模块解耦）
页面核心模块包括：**任务列表、时间表、快捷输入、统计分析、完整统计弹窗**，以及辅助工具（状态图标、心情选择器）。将这些模块拆分为独立子组件，`MainSchedulePage` 作为「容器」管理全局状态与数据，子组件专注「UI渲染+局部交互」。


### 二、文件结构建议
在 `MainSchedulePage` 目录下，按「页面入口 + 私有组件」组织文件：

```
src/pages/MainSchedulePage/
├── components/                # 页面私有组件目录
│   ├── TaskFilterTabs/        # 任务筛选标签组件
│   │   ├── TaskFilterTabs.jsx # 筛选标签的UI与交互
│   │   └── TaskFilterTabs.css # 组件样式
│   ├── TaskSearch/            # 任务搜索组件
│   │   ├── TaskSearch.jsx
│   │   └── TaskSearch.css
│   ├── TaskItem/              # 单条任务组件
│   │   ├── TaskItem.jsx       # 任务（含子任务）的渲染
│   │   └── TaskItem.css
│   ├── TaskList/              # 任务列表容器
│   │   ├── TaskList.jsx       # 筛选+渲染TaskItem
│   │   └── TaskList.css
│   ├── TimeSlot/              # 单条时间槽组件
│   │   ├── TimeSlot.jsx       # 时间槽（任务/心情/AI推荐）的渲染
│   │   └── TimeSlot.css
│   ├── TimeSlotList/          # 时间槽列表容器
│   │   ├── TimeSlotList.jsx   # 渲染TimeSlot列表
│   │   └── TimeSlotList.css
│   ├── QuickInputBar/         # 快捷输入栏组件
│   │   ├── QuickInputBar.jsx  # 快速添加任务的输入+按钮
│   │   └── QuickInputBar.css
│   ├── WeeklyStatsOverview/   # 本周统计概览组件
│   │   ├── WeeklyStatsOverview.jsx # 统计卡片+图表入口
│   │   └── WeeklyStatsOverview.css
│   ├── WeeklyChart/           # 本周时间分布图表
│   │   ├── WeeklyChart.jsx    # Chart.js的Bar图表封装
│   │   └── WeeklyChart.css
│   ├── AnalysisCards/         # 分析卡片组（心情/AI建议）
│   │   ├── AnalysisCards.jsx
│   │   └── AnalysisCards.css
│   ├── FullStatsModal/        # 完整统计弹窗
│   │   ├── FullStatsModal.jsx # 弹窗的显示/隐藏+详细统计
│   │   └── FullStatsModal.css
│   ├── StatusIcon/            # 状态图标工具（复用）
│   │   └── StatusIcon.jsx     # 根据状态返回图标/样式
│   └── MoodSelector/          # 心情选择器（复用）
│       └── MoodSelector.jsx   # 心情按钮组的渲染+交互
├── MainSchedulePage.jsx       # 页面入口（容器：状态管理+数据请求）
└── MainSchedulePage.css       # 页面级样式（整体布局、间距）
```


### 三、各组件职责与协作
#### 1. `MainSchedulePage.jsx`（容器组件）
- **核心职责**：
  - 管理**全局状态**：`expandedTasks`（任务展开状态）、`activeFilter`（任务筛选）、`showFullStats`（弹窗显隐）、`quickInput`（快捷输入内容）、`selectedMoods`/`aiRecommendations`（时间槽交互）、`tasks`/`timeSlots`/`scheduleOverview`（接口数据）、`loading`/`error`（加载状态）。
  - 处理**数据请求**：`loadTasks`（加载任务列表）、`loadTimeSlots`（加载今日时间表），在 `useEffect` 中初始化数据。
  - 定义**回调函数**：`toggleTaskExpansion`（任务展开/收起）、`handleMoodSelect`（心情选择）、`handleAiRecommendation`（AI推荐交互）、`handleQuickAdd`（快捷添加任务）、`handleFilterClick`（任务筛选切换）等。
  - **组装子组件**：将状态/回调通过 `props` 传递给 `<TaskList />`、`<TimeSlotList />`、`<QuickInputBar />` 等子组件，协调整体渲染。


#### 2. 任务列表相关组件
- **`TaskFilterTabs.jsx`**：
  - 接收 `activeFilter`（当前选中筛选）和 `onFilterClick`（来自容器的筛选切换回调）。
  - 渲染「全部、学习、生活」等筛选标签，点击时触发 `onFilterClick` 更新全局筛选状态。

- **`TaskSearch.jsx`**：
  - 渲染搜索输入框 + 筛选按钮，处理输入事件（若需搜索逻辑，可传递回调给容器）。

- **`TaskItem.jsx`**：
  - 接收 `task`（单条任务数据）、`isExpanded`（是否展开子任务）、`onToggleExpansion`（展开/收起回调）。
  - 渲染单条任务（含子任务），点击任务标题时触发 `onToggleExpansion`。

- **`TaskList.jsx`**：
  - 接收 `tasks`（所有任务）、`activeFilter`（当前筛选）、`expandedTasks`（全局展开状态）、`onToggleTaskExpansion`（容器的展开回调）。
  - 根据 `activeFilter` 筛选任务，循环渲染 `TaskItem`，并传递每条任务的「展开状态+回调」。


#### 3. 时间表相关组件
- **`TimeSlot.jsx`**：
  - 接收 `slot`（单条时间槽数据）、`selectedMoods`/`aiRecommendations`（全局交互状态）、`onMoodSelect`/`onAiRecommendation`（容器的交互回调）。
  - 渲染时间槽（含任务内容、心情选择按钮、AI推荐提示），点击心情/AI按钮时触发对应回调。

- **`TimeSlotList.jsx`**：
  - 接收 `timeSlots`（所有时间槽）、`selectedMoods`/`aiRecommendations`（全局交互状态）、`onMoodSelect`/`onAiRecommendation`（容器的交互回调）。
  - 循环渲染 `TimeSlot`，传递每条时间槽的「数据+交互回调」。


#### 4. 快捷输入与统计组件
- **`QuickInputBar.jsx`**：
  - 接收 `quickInput`（输入内容）、`onQuickInputChange`（输入变更回调）、`onQuickAdd`（确认添加回调）。
  - 渲染输入框、麦克风按钮、确认按钮，处理输入变化和“添加任务”逻辑。

- **`WeeklyStatsOverview.jsx`**：
  - 接收 `stats`（本周统计数据）、`onShowFullStats`（显示完整统计弹窗的回调）。
  - 渲染“总学习时长、完成率”等统计卡片，以及「查看完整统计」按钮。

- **`WeeklyChart.jsx`**：
  - 接收 `weeklyChartData`（图表数据）、`chartOptions`（Chart.js配置）。
  - 封装 `react-chartjs-2` 的 `Bar` 组件，渲染“本周时间分布”图表。

- **`AnalysisCards.jsx`**：
  - 渲染「心情-效率分析」「AI优化建议」卡片组，纯展示或简单交互（若需复杂逻辑，可传递回调给容器）。


#### 5. 弹窗与工具组件
- **`FullStatsModal.jsx`**：
  - 接收 `showFullStats`（弹窗显隐状态）、`onClose`（关闭弹窗回调）、`doughnutChartData`/`doughnutOptions`（饼图数据/配置）。
  - 控制弹窗显隐，渲染“任务类别分布、高频任务、待克服任务”等详细统计内容。

- **`StatusIcon.jsx`**：
  - 接收 `status`（任务状态，如 `completed`/`pending`），返回对应的图标类名（如 `fa-check-circle`）和样式类名（如 `text-green-500`），纯工具组件（复用性高）。

- **`MoodSelector.jsx`**：
  - 接收 `slotId`（时间槽ID）、`selectedMood`（当前选中心情）、`onMoodSelect`（心情选择回调）。
  - 渲染“愉快、专注、疲惫”心情按钮组，点击时触发 `onMoodSelect` 更新全局状态。


### 拆分优势
- **职责单一**：每个组件只关注「一个功能模块」（如 `TimeSlot` 只渲染时间槽，`TaskItem` 只渲染任务）。
- **复用性高**：`StatusIcon`、`MoodSelector` 可在其他页面复用；`TaskItem` 也能在“任务管理”类场景复用。
- **易维护**：修改某模块（如“时间槽的AI推荐样式”），只需调整 `TimeSlot.jsx`，不影响全局。
- **协作友好**：多人开发时，可按组件分工（如A负责 `TaskList`，B负责 `TimeSlotList`），减少代码冲突。


通过这种拆分，能让复杂的「智能时间管理页面」代码结构更清晰，长期维护性更强。